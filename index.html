<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Buscador YouTube</title>
</head>
<body>
    <h1>Buscador YouTube</h1>
    <form id="searchForm">
        <input type="text" id="query" placeholder="Digite sua busca" required>
        <button type="submit">Buscar</button>
    </form>

    <div id="results"></div>

    <script>
        const form = document.getElementById('searchForm');
        const resultsDiv = document.getElementById('results');
        const backendURL = 'https://youtube-me-io.onrender.com';

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const query = document.getElementById('query').value;

            resultsDiv.innerHTML = 'Carregando...';

            try {
                const response = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=5&q=${encodeURIComponent(query)}&key=AIzaSyCdYsIw8W9CyV2GF9w7a96eeIAMOyH5TxU`);
                const data = await response.json();

                resultsDiv.innerHTML = '';
                data.items.forEach(video => {
                    const videoId = video.id.videoId;
                    const title = video.snippet.title;

                    resultsDiv.innerHTML += `
                        <div>
                            <h3>${title}</h3>
                            <a href="${backendURL}/download?url=https://www.youtube.com/watch?v=${videoId}&format=mp4" target="_blank">Baixar MP4</a>
                            |
                            <a href="${backendURL}/download?url=https://www.youtube.com/watch?v=${videoId}&format=mp3" target="_blank">Baixar MP3</a>
                        </div>
                        <hr>
                    `;
                });
            } catch (err) {
                resultsDiv.innerHTML = 'Erro ao buscar v√≠deos.';
                console.error(err);
            }
        });
    </script>
</body>
</html>
